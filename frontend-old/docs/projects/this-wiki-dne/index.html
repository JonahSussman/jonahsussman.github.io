<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tensorpedia</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="/assets/css/index.css">
    <link rel="stylesheet" href="/assets/css/prism-base16-monokai.dark.css">

    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Jonah Sussman">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Jonah Sussman">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet"> 
    
  </head>
  <body class=" theme-blue ">
    <div class="site-wrapper">

      <header id="navbar" class="site-header">
        <div class="nav-flex">
          <svg id="nav-toggle" class="" viewBox="0 0 100 100" width="2.25rem" height="2.25rem" fill="var(--black)">
            <rect y="10" width="100" height="20" rx="10"></rect>
            <rect y="40" width="100" height="20" rx="10"></rect>
            <rect y="70" width="100" height="20" rx="10"></rect>
          </svg>
          <a class="nav-logo crazy-jonah" href="/">Jonah Sussman</a>
          <div id="nav-menu">
            <a class="nav-link" href="/posts/">Posts</a>
            <a class="nav-link" href="/about/">About</a>
            <a class="nav-link" href="/projects/">Projects</a>
            <a class="nav-link" href="/assets/Jonah%20Sussman%20Resume%20ONLINE.pdf">Resume</a>
          </div>
        </div>
      </header>
      
    <nav class="site-breadcrumb">
      <!-- <div class="breadcrumb-flex">
        <a href="apples">apples</a> » <a>bananas</a> » <a>cherries</a>
      </div> -->
    </nav>

      <!-- Begin base insert -->
      <main class="site-main  layout-single ">
        <!-- petiteVue: true -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
::selection {
  background: #3399FF; /* WebKit/Blink Browsers */
}

.wiki-container {
  /* background-color: f6f6f6; */
  font-family: sans-serif;
  font-size: 16px;

  display: grid;
  grid-template-columns: 11em minmax(0, calc(800px - 11em));
  grid-template-areas: "wiki-panel wiki-content";

  word-wrap: break-word;

  background-image: linear-gradient(to bottom, white 0px, white 2.5em, #f6f6f6 5em, #f6f6f6 100%);
}

.wiki-panel {
  grid-area: wiki-panel;
  padding-left: .5em;
  padding-right: .5em;
}

.wiki-content {
  grid-area: wiki-content;
}

@media (max-width: 500px) {
  .wiki-container {
    grid-template-columns: 100vw;
    grid-template-areas: "wiki-content";
  }

  .wiki-panel {
    display: none;
  }
}

.wiki-logo {
  display: block;
  width: 160px;
  height: 160px;
  margin-bottom: 1em;
  background-position: center center;
  background-repeat: no-repeat;
  background-image: url('/assets/projects/wiki-thumb.png');
}

.wiki-container p {
  font-size: .875em;
}

.wiki-container h1 {
  font-size: 1.8em;
  margin-top: 0;
  margin-bottom: 0.25em;
  padding: 0;
  font-family: 'Linux Libertine','Georgia','Times',serif;
  line-height: 1.3;
  font-weight: normal;
  border-bottom: 1px solid #a2a9b1;
}

.wiki-container h2 {
  font-size: calc(.875em * .92);
  margin: 0;
  font-weight: 400;
  margin-bottom: 1.4em;
}

.wiki-container a {
  color: #0645ad;
  cursor: pointer;
  text-decoration: none;
}
.wiki-container a:hover, a:focus {
  text-decoration: underline;
}

.wiki-menu {
  margin: 0 0.6em 0 0.7em;
  padding: 0.25em 0;
}

.wiki-menu-content {
  margin-left: 0.5em;
  padding-top: 0;
}

.wiki-menu-list {
  list-style: none none;
  margin: 0;
  padding: 0;
  padding-top: 0.3em;
}

.wiki-menu-item {
  margin: 0;
  padding: 0.25em 0;
  font-size: 0.75em;
  line-height: 1.125em;
  word-wrap: break-word;
}

.wiki-menu-label {
  display: block;
  /* background-image: url(/w/skins/Vector/resources/common/images/portal-separator.png?4ab04); */
  background-image: linear-gradient(to right,rgba(200,204,209,0) 0,#c8ccd1 33%,#c8ccd1 66%,rgba(200,204,209,0) 100%);
  background-position: center bottom;
  background-repeat: no-repeat;
  background-size: 100% 1px;
  color: #54595d;
  margin: 0.5em 0 0 0.66666667em;
  border: 0;
  padding: 0.25em 0;
  font-size: 0.75em;
  font-weight: normal;
  cursor: default;
}

.wiki-head {
  display: flex;
  justify-content: space-between;
}

.wiki-nav-right, .wiki-nav-left {
  margin-top: 2.5em;
}

.wiki-nav-left {
  display: flex;
  flex-direction: row;
  gap: 4px;
  align-items: center;
}

#wiki-search {
  height: 2.5em;
  padding-top: .5em;
  padding-bottom: 4px;
  max-width: unset;
}

#wiki-input {
  min-width: 5em;
  width: 13.2em;
  width: 20vw;
  max-width: 20em;
  margin-right: 1em;
  margin-left: .5em;

  height: 100%;
}

@media (max-width: 500px) {
  .wiki-head {
    flex-direction: column;
  }
  .wiki-nav-right {
    margin-top: 0;
    flex-grow: 1;
  }
  .wiki-nav-right, .wiki-nav-left {
    justify-content: right;
    margin-left: 1.5em;
    margin-right: 1.5em;
  }
  #wiki-input {
    max-width: none;
    margin-left: 0;
    margin-right: 0;
    width: 100%;
  }
}

.wiki-main {
  background-color: white;
  border-left: 1px solid #a7d7f9;
  border-top: 1px solid #a7d7f9;
  border-bottom: 1px solid #a7d7f9;
  padding: 1.25em 1.5em 1.5em 1.5em;
}

.wiki-footer {
  padding: 1.25em;
  font-size: 12px;
}

.wiki-indicators {
  float: right;

  display: flex;
  flex-direction: row;
  gap: 4px;
  /* opacity: 0.5;
  transition: 0.2s; */
}
/* .wiki-indicators:hover {
  opacity: 1;
} */

.spinner {
  margin: 100px auto;
  width: 50px;
  height: 40px;
  text-align: center;
  font-size: 10px;
}

.spinner > div {
  background-color: var(--rect1, #333);
  height: 100%;
  width: 6px;
  display: inline-block;
  
  animation: sk-stretchdelay 1.2s infinite ease-in-out;
}

.spinner .rect2 {
  background-color: var(--rect2, #333);
  animation-delay: -1.1s;
}

.spinner .rect3 {
  background-color: var(--rect3, #333);
  animation-delay: -1.0s;
}

.spinner .rect4 {
  background-color: var(--rect4, #333);
  animation-delay: -0.9s;
}

.spinner .rect5 {
  background-color: var(--rect5, #333);
  animation-delay: -0.8s;
}

@-webkit-keyframes sk-stretchdelay {
  0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  
  20% { -webkit-transform: scaleY(1.0) }
}

@keyframes sk-stretchdelay {
  0%, 40%, 100% { 
    transform: scaleY(0.4);
    -webkit-transform: scaleY(0.4);
  }  20% { 
    transform: scaleY(1.0);
    -webkit-transform: scaleY(1.0);
  }
}

#wiki-loader {
  text-align: center;
}

.wiki-error {
  border: 1px solid #a2a9b1;
  border-left: 10px solid #f28500;
  background-color: #fbfbfb;
  width: 90%;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1em;
  padding-right: 1em;
}
</style>

<script src="https://cdn.socket.io/4.4.0/socket.io.min.js" integrity="sha384-1fOn6VtTq3PWwfsOrk45LnYcGosJwzMHv+Xh/Jx5303FVOXzEnw0EpLv30mtjmlj" crossorigin="anonymous"></script>
<script defer>

let socket;
let e_title, e_content, e_loader, e_updates, e_indicators, e_please, e_force
let e_ind_lock
let is_loading = true;
let first_connect = true;

window.onload = () => {
  e_title   = document.getElementById('wiki-title');
  e_content = document.getElementById('wiki-content');
  e_loader  = document.getElementById('wiki-loader');
  e_updates = document.getElementById('wiki-updates');
  e_indicators = document.getElementById('wiki-indicators');
  e_please = document.getElementById('wiki-please');
  e_ind_lock = document.getElementById('wiki-lock');

  socket = io('https://api.jonahsussman.net/this-wiki-dne', {transports: ['websocket']})
  socket.on('query-response', wiki_handle_response);
  socket.on('connect', () => { 
    console.log('socket connect'); 
    wiki_set_is_loading(false);
    const params = new URLSearchParams(window.location.search);
    const title  = params.get('query');
    if (first_connect) {
      first_connect = false;
      wiki_nav(title, false, true);
    }
  });
  socket.on('connect_error', () => { 
    console.log('socket connect failed'); 
    wiki_update_loader('connect_error');
  });
  socket.on('reconnect', () => {
    console.log('reconnected!')
  })
}

const wiki_homepage = {
  title: 'Welcome to Tensorpedia!',
  content: /* html */ `
    <p>Welcome to <b>Tensorpedia</b>! Tensorpedia is a program that utilizes artificial intelligence (<a href="https://github.com/minimaxir/aitextgen">aitextgen</a> and <a href="https://openai.com/blog/better-language-models/">GPT-2</a>) to synthesize Wikipedia articles based on nothing but its title. In other words, <i>none of these articles exist!</i></p>
    <p>This website takes a given title and generates a viable-looking Wikipedia-like article about it, using Wikipedia's 10,000 <a href="https://en.wikipedia.org/wiki/Wikipedia:Vital_articles/Level/4">"vital articles"</a> as a dataset. If you want to learn more about how I created this project, check out <a href="/posts/2022-01-this-wiki-dne">my article here</a>.</p>
    <p>Feel free to click on any links you see within a page, search using the search bar, or go to a random page by clicking "random page" in the sidebar or footer!</p>
    <ul style="margin: 0.3em 0 0 1.6em;padding: 0;font-size:.875em;">
      <li>Once an article is generated, you can regenerate the article using the "Regenerate" button.</li>
      <li>If the generated article does not talk about the title, you can force the title of the article to be the first words using the "Force title" button.</li>
    </ul>
    <p>Here are some interesting links to get you started:</p>
    <ul style="margin: 0.3em 0 0 1.6em;padding: 0;font-size:.875em;">
      <li><a href="?query=Science" onclick="wiki_nav('Science'); return false;">Science</a></li>
      <li><a href="?query=Alan Turing" onclick="wiki_nav('Alan Turing'); return false;">Alan Turing</a></li>
      <li><a href="?query=Jonah Sussman" onclick="wiki_nav('Jonah Sussman'); return false;">Jonah Sussman</a></li>
      <li><a href="?query=The Hugo Award" onclick="wiki_nav('The Hugo Award'); return false;">The Hugo Award</a></li>
      <li><a href="?query=New York City" onclick="wiki_nav('New York City'); return false;">New York City</a></li>
      <li><a href="?query=Rijksmuseum" onclick="wiki_nav('Rijksmuseum'); return false;">Rijksmuseum</a></li>
    </ul>
    <p><small>Note: The current version of Tensorpedia is running on a single core vCPU as that's the only type of server I can afford right now. That means generating <i>new</i> articles can take anywhere from 10 to 60 seconds. Thank you for understanding.</small></p>`
}

function wiki_update_title(title) {
  title = title.charAt(0).toUpperCase() + title.slice(1);
  e_title.innerText = title;
  document.title = `${title} - Tensorpedia`;
}

// { lock }
function wiki_update_indicators(indicators) {
  if (indicators == undefined) {
    e_ind_lock.style = "display: none;";
    return;
  }
  if (indicators.lock == undefined || indicators.lock == false) {
    e_ind_lock.style = "display: none;";
  } else {
    e_ind_lock.style = "";
  }
}

// God-awful regex replacement stuff. Don't look at this
function wiki_process_wikitext(wikitext) {
  result_html = '';
  let title = '';

  wikitext
    .replace(/\[\[ /g, '\[\[') // Fix spacing around wikilinks
    .replace(/ \]\]/g, '\]\]')
    .replace(/ \| /g, '\|')
    .replace(/\.([^.]*)$/, '.') // Remove sentence at end w/o period
    .replace(/== (.*) == */g, (m, g) => { title = g; return ''; }) // Remove wikititle
    .replace(/ *\\n */g, '\n') // Convert "\\n" to actual newline
    .replace(/\]\]([a-zA-Z]*)/g, (m, g) => `${g}]]`) // Add extensions
    .replace(/^.*$/gm, sentence => {
      sentence = sentence
        .replace(/'{3}([^']*)'{3}/g, (m, g) => `<b>${g}</b>`) // Bold
        .replace(/'{2}([^']*)'{2}/g, (m, g) => `<i>${g}</i>`) // Italic
        // The whole reason that I'm not using Vue or react is for this functionality
        .replace(/(\[\[([^[]*)\|([^\]]*)\]\])|(\[\[([^[|]*)\]\])/g, (m, g1, g2, g3, g4, g5) => {
          if (g1 != undefined) {
            return `<a class="wiki-link" title="${g2}" href="?query=${g2}" onclick="wiki_nav('${g2}'); return false;">${g3}</a>`
          } else {
            return `<a class="wiki-link" title="${g5}" href="?query=${g5}" onclick="wiki_nav('${g5}'); return false;">${g5}</a>`
          }
        })
        .replace(/\[\[/g, '') // Remove stray [[ and ]]
        .replace(/\]\]/g, '')

      result_html += `<p>${sentence}</p>`
    });

  title = title.toLocaleLowerCase().replace(/[^a-zA-Z]/g, '').toLowerCase();

  if (title.startsWith('listof')) {
    result_html = `
      <div class="wiki-error">
        <p><b style="text-align: center;">Tensorpedia Lists</b><br>
        this article is meant to be a list. Tensorpedia was not trained on wikipedia lists. As such, the output may not be what you expect.</p>
      </div>` + result_html;
  }

  return result_html;
}

function wiki_set_is_loading(value) {
  is_loading = value;
  if (is_loading) {
    e_content.style = "display: none;";
    e_loader.style = "";
    e_please.style = ""; 
  } else {
    e_content.style = "";
    e_loader.style = "display: none;";
  }
}

function wiki_update_content(html) {
  wiki_set_is_loading(false);
  
  e_content.innerHTML = html;
}

function wiki_update_loader(data) {
  wiki_set_is_loading(true);

  if (data == 'connect_error') {
    e_please.style = "display: none;"; 
    e_updates.innerHTML = `
      <p>There is an issue connecting to Tensorpedia. Continuing to try and connect...</p>
      <p>I may have taken <a href="https://api.jonahsussman.net/">my api server</a> down for maintenance. If that link works, then there is an issue with the client-side code.</p>`;
    e_loader.style = `
      --rect1: var(--red); 
      --rect2: var(--red); 
      --rect3: var(--red); 
      --rect4: var(--red); 
      --rect5: var(--red);`
  } else if (data == 'PROCESSING') {
    e_updates.innerText = 'Your request is currently processing.'
    e_loader.style = `
      --rect1: var(--red); 
      --rect2: var(--orange); 
      --rect3: var(--green); 
      --rect4: var(--blue); 
      --rect5: var(--purple);`
  } else {
    e_updates.innerText = `You are position ${data+1} in the queue.`
    e_loader.style = ``
  }
}

window.onpopstate = (e) => {
  if (e.state) {
    wiki_nav(e.state.title, false, true);
  } else {
    wiki_nav('', false, true);
  }
}

function wiki_nav(title, regen=false, pop_state=false, force=false) {
  if (is_loading) {
    e_updates.innerText = 'Please wait until your request has been processed.'
    return;
  }

  if (!pop_state) {
    console.log('push')
    window.history.pushState({title: title}, '', `?query=${title}`);
  } else {
    console.log('pop')
  }

  console.log(`Nagvigating to ${title}`)
  if (title == wiki_homepage.title || title == '' || title == 'null' || title == null) {
    wiki_update_title(wiki_homepage.title);
    wiki_update_content(wiki_homepage.content);
    wiki_update_indicators({ lock: true });
    return;
  }

  // if (title == 'tensorpedia:connect_failed') {
  //   wiki_update_title(title);
  //   wiki_update_content(`
  //     <p>There was an issue connecting to Tensorpedia. I may have taken <a href="https://api.jonahsussman.net/">my api server</a> down for maintenance or there is an issue with the client-side code.</p>
  //     <p>In other words, please try again later.</p>
  //   `)
  //   return;
  // }

  title = title.charAt(0).toUpperCase() + title.slice(1);
  // let force = e_force.checked;
  // e_force.checked = false;
  console.log(`force: ${force}`)

  let query = { title: title, regen: regen, force: force }
  console.log(query);
  wiki_update_title(title);
  wiki_update_indicators({ lock: false });
  socket.emit('query', query);
}

function wiki_regenerate(force) {
  wiki_nav(e_title.innerText, true, false, force)
}

function wiki_search() {
  event.preventDefault(); 
  let x = document.getElementById('wiki-input'); 
  let y = x.value; 
  x.value = ''; 
  console.log('searching'); 
  wiki_nav(y);
}

function wiki_handle_response(resp) {
  console.log(resp);
  if (resp.status == 'WAIT' || resp.status == 'PROCESSING') {
    wiki_update_loader(resp.data);
  } else if (resp.status == 'OK') {
    let title;
    resp.data.replace(/== (.*) ==/g, (m, g) => {title = g})
    wiki_update_title(title)
    wiki_update_content(wiki_process_wikitext(resp.data));
    wiki_update_indicators(resp.indicators);
  } else {
    wiki_update_indicators({ lock: false });
    wiki_update_content( /* html */
      `<p>There was an error processing your request</p>
      <p><code>${resp.data}</code></p>
      <p>Please reload the page and try again</p>`
    )
  }
}

function wiki_random() {
  let xhr = new XMLHttpRequest();
  let url = "https://en.wikipedia.org/api/rest_v1/page/random/summary";
  xhr.open("GET", url , true); // false for synchronous request
  xhr.onload = () => wiki_nav(JSON.parse(xhr.responseText).displaytitle);
  xhr.send(null);
}

</script>

<div class="site-content">

<div class="wiki-container">
  <div class="wiki-panel">
    <a href="?query=" onclick="wiki_nav(''); return false;" class="wiki-logo"></a>
    <nav class="wiki-menu">
      <div class="wiki-menu-content">
        <ul class="wiki-menu-list">
          <li class="wiki-menu-item"><a href="?query=" onclick="wiki_nav(''); return false;">Main page</a></li>
          <li class="wiki-menu-item"><a onclick="wiki_random(); return false;">Random article</a></li>
          <li class="wiki-menu-item"><a href="/posts/2022-01-this-wiki-dne">About Tensorpedia</a></li>
          <li class="wiki-menu-item"><a href="/about">About me</a></li>
          <li class="wiki-menu-item"><a href="mailto:sussmanjonah+thiswikidne@gmail.com">Report a problem</a></li>
          <!-- <li class="wiki-menu-item"><a href="https://www.buymeacoffee.com/JonahSussman">Buy me a coffee</a></li> -->
        </ul>
      </div>
    </nav>
    <nav class="wiki-menu">
      <!-- <h3 class="wiki-menu-label">Print/export</h3> -->
      <h3 class="wiki-menu-label">Donate</h3>
      <div class="wiki-menu-content">
        <ul class="wiki-menu-list">
          <li class="wiki-menu-item"><a href="https://www.buymeacoffee.com/JonahSussman">Buy me a coffee</a></li>
          <!-- <li class="wiki-menu-item"><a>Save a screenshot</a></li> -->
        </ul>
      </div>
    </nav>
  </div>

  <div class="wiki-content">
    <div class="wiki-head">
      <div class="wiki-nav-left">
        <!-- <input type="checkbox" id="wiki-force" name="wiki-force" value="Force">
        <label for="wiki-force">Force title</label> -->
        <button type="button" onclick="wiki_regenerate(false); return false;"><i class="fa fa-refresh"></i> Regenerate</button>
        <button type="button" onclick="wiki_regenerate(true); return false;"><i class="fa fa-pencil"></i> Force title</button>
      </div>
      <div class="wiki-nav-right">
        <form id="wiki-search" onsubmit="wiki_search()">
          <input id="wiki-input" type="text" placeholder="Search Tensorpedia">
        </div>
    </div>

    <div id="wiki-main" class="wiki-main">
      <div class="wiki-section">
        <!-- <div id="wiki-indicators" class="wiki-indicators" style="font-size:0.875em"> -->
        <div id="wiki-indicators" class="wiki-indicators">
          <i id="wiki-lock" style="" class="fa fa-lock"></i>
        </div>
        <h1 id="wiki-title">Connecting to Tensorpedia...</h1>
        <h2>From Tensorpedia, the poorly auto-generated encyclopedia</h2>
        <div id="wiki-content" class="wiki-paragraphs" style="display: none;"></div>
        <div id="wiki-loader">
          <div class="spinner">
            <div class="rect1"></div>
            <div class="rect2"></div>
            <div class="rect3"></div>
            <div class="rect4"></div>
            <div class="rect5"></div>
          </div>
          <code id="wiki-updates"></code>
          <details id="wiki-please" style="display: none;">
            <summary style="cursor: pointer;">Please allow a minute or two once your text begins processing.</summary>
            <small>The aitextgen model that Tensorpedia uses is currently running on the server's CPU. Running it on a GPU would be much faster. However, I am but a college student and GPUs are expensive.</small>
          </details>
        </div>
      </div>
    </div>
    <div class="wiki-footer">
      <!-- <a onclick="wiki_nav('')" class="wiki-logo" style="float: right; width: 60px; height: 60px; background-size: 100%;"></a> -->
      <p style="font-size: 1.1em;">
        <a href="?query=" onclick="wiki_nav(''); return false;">Main page</a>
      • <a onclick="wiki_random(); return false;">Random article</a>
      • <a href="/posts/2022-01-this-wiki-dne">About Tensorpedia</a>
      • <a href="/about">About me</a>
      • <a href="mailto:sussmanjonah+thiswikidne@gmail.com">Report a problem</a>
      • <a href="https://www.buymeacoffee.com/JonahSussman">Buy me a coffee</a>
      </p>
      <p>I am not responsible for any text generated that may be offensive.</p>
      <p>Wikipedia® is a registered trademark of the Wikimedia Foundation, Inc., a non-profit organization. I have no association with Wikipedia. Opinions expressed are solely my own and do not express the views or opinions of my employer.</p>
    </div>
  </div>
</div>
  
</div>
      </main>
      <!-- End base insert -->

      <footer class="site-footer">
        <p>2020 - 2022 | Made with 💖 by Jonah Sussman</p>
        <p><a href="#navbar">Back to top</a></p>
      </footer>
    </div>
  </body>

  <script>
    function navResponse() {
      let m = document.getElementById("nav-menu");
      m.className = m.className === "" ? "active" : "";

      let btn = document.getElementById("nav-toggle");
      btn.setAttribute("class", btn.getAttribute("class") === "" ? "active" : "");
    }
    document.getElementById("nav-toggle").addEventListener("click", navResponse, false);
  </script>
</html>
